/*!
 * jQuery SVG-PieTimer v@1.1
 * https://github.com/yohannrub/jquery.svg-pietimer
 * Licensed under the MIT license
 */
(function(d){function g(a,b){var c=a%b;return 0<=c?c:c+b}var h={duration:5E3,refreshInterval:50,loop:!1,loopCallback:d.noop,refreshCallback:d.noop,centerRadius:33,cssClass:"pietimer"},f={init:function(a){a=d.extend({},h,a);var b=['<svg class="'+a.cssClass+'" viewBox="0 0 100 100">','<path transform="translate(50,50)"/>','<circle cx="50" cy="50" r="'+a.centerRadius+'"/>',"</svg>"].join("");d(b).appendTo(this);return this.each(function(){var b=d(this),e=d.extend({},a);e.isPlaying=!1;e.timerInterval= null;e.timeStart=null;e.timePause=null;e.ratio=0;e.$svgPath=b.find("path");b.data("pietimer",e)})},drawPath:function(a){return this.each(function(){var b=d(this),c=b.data("pietimer");a=g(a,1);var e=2*a*Math.PI,f=50*Math.sin(e),e=-50*Math.cos(e),f="M 0 0 v -50 A 50 50 1 "+(.5<a?1:0)+" 1 "+f+" "+e+" z";c.ratio=a;c.$svgPath.attr("d",f);c.refreshCallback.call(b)})},draw:function(a){return this.each(function(){var b=d(this),c=b.data("pietimer");a=g(a,1);c.timePause=d.now();c.timeStart=c.timePause-c.duration* a;b.pietimer("drawPath",a)})},play:function(){return this.each(function(){var a=d(this),b=a.data("pietimer");b.isPlaying||(b.isPlaying=!0,clearInterval(b.timerInterval),b.timeStart=b.timeStart&&b.timePause?d.now()-(b.timePause-b.timeStart):d.now(),b.timerInterval=setInterval(function(){var c=(d.now()-b.timeStart)/b.duration;if(1<=c)if(b.loop)b.timeStart+=b.duration*Math.floor(c),b.loopCallback.call(a);else{a.pietimer("pause");b.timeStart=b.timePause=null;a.pietimer("drawPath",.99999);b.loopCallback.call(a); return}a.pietimer("drawPath",c)},b.refreshInterval))})},pause:function(){return this.each(function(){var a=d(this).data("pietimer");a.isPlaying&&(a.isPlaying=!1,clearInterval(a.timerInterval),a.timePause=d.now())})},stop:function(){return this.each(function(){var a=d(this),b=a.data("pietimer");a.pietimer("pause");b.timeStart=b.timePause=null;a.pietimer("drawPath",0)})},update:function(a){a=d.extend({},h,a);return this.each(function(){var b=d(this),c=d.extend({},a);c.isPlaying=!1;c.timerInterval=null; c.timeStart=null;c.timePause=null;c.ratio=0;c.$svgPath=b.find("path");b.data("pietimer",c)})},reset:function(){return this.each(function(){var a=d(this),b=a.data("pietimer");a.pietimer("pause");b.timeStart=b.timePause=null;a.pietimer("play")})},getCurrentRatio:function(){return this.data("pietimer").ratio}};d.fn.pietimer=function(a){if(f[a])return f[a].apply(this,Array.prototype.slice.call(arguments,1));if("object"!==typeof a&&a)d.error("Method "+a+" does not exist on jQuery.pietimer");else return f.init.apply(this, arguments)}})(jQuery);